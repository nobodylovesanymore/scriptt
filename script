local magic = loadstring(game:HttpGet("https://scripting.live/funnygamma.lua"))()

local Window = magic:CreateWindow("nitrogen, 2025 february 4th                                                                      made by noq#0000") --// Don't do uppercase it looks bad for no reason

local function runFunction(f)
    xpcall(f, warn)
end

-- Tabs
local Main = Window:CreateTab("Main")
local Misc = Window:CreateTab("Misc")
local Visuals = Window:CreateTab("Visuals")
local Teleports = Window:CreateTab("Teleports")
local Settings = Window:CreateTab("Settings")

-- Sections
local MainSectionLeft = Main:Section()
local MainSectionRight = Main:Section()
local MiscSectionLeft = Misc:Section()
local MiscSectionRight = Misc:Section()
local VisualsSectionLeft = Visuals:Section()
local VisualsSectionRight = Visuals:Section()
local TeleportsSectionLeft = Teleports:Section()
local TeleportsSectionRight = Teleports:Section()
local SettingsSectionLeft = Settings:Section()
local SettingsSectionRight = Settings:Section()



MainSectionLeft:Toggle("Camlock ┃ Keybind: C", function(f)
    if f then
        Aimbot.Status = true
    else
        Aimbot.Status = false
    end
end)

getgenv().Aimbot = {
    Status = false,
    Keybind = 'C',
    Hitpart = 'Head',
    ['Prediction'] = {
        X = 0,
        Y = 0,
    },
}

if getgenv().AimbotRan then
    return
else
    getgenv().AimbotRan = true
end

local RunService = game:GetService('RunService')
local Workspace = game:GetService('Workspace')
local Players = game:GetService('Players')

local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

local Player = nil

local GetClosestPlayer = function()
    local ClosestDistance, ClosestPlayer = 100, nil
    for _, Player : Player in pairs(Players:GetPlayers()) do
        if Player.Name ~= LocalPlayer.Name and Player.Character and Player.Character:FindFirstChild('HumanoidRootPart') then
            local Root, Visible = Camera:WorldToScreenPoint(Player.Character.HumanoidRootPart.Position)
            if not Visible then
                continue
            end
            Root = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(Root.X, Root.Y)).Magnitude
            if Root < ClosestDistance then
                ClosestPlayer = Player
                ClosestDistance = Root
            end
        end
    end
    return ClosestPlayer
end

Mouse.KeyDown:Connect(function(key)
    if key == Aimbot.Keybind:lower() then
        if Aimbot.Status then
            Player = not Player and GetClosestPlayer() or nil
        end
    end
end)

RunService.RenderStepped:Connect(function()
    if not Player then
        return
    end
    if not Aimbot.Status then
        return
    end
    local Hitpart = Player.Character:FindFirstChild(Aimbot.Hitpart)
    if not Hitpart then
        return
    end
    Camera.CFrame = CFrame.new(Camera.CFrame.Position, Hitpart.Position + Hitpart.Velocity * Vector3.new(Aimbot.Prediction.X, Aimbot.Prediction.Y, Aimbot.Prediction.X))
end)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

local hitboxSize = 10
local hitboxColor = Color3.fromRGB(192, 163, 193)
local originalHumanoidRootPartSize = Vector3.new(2, 2, 1)

local isHitboxVisible = true
local refreshTime = 1
local hitboxLoop

local function hexToColor3(hex)
    hex = hex:gsub("#", "")
    if #hex == 6 then
        local r = tonumber(hex:sub(1, 2), 16)
        local g = tonumber(hex:sub(3, 4), 16)
        local b = tonumber(hex:sub(5, 6), 16)
        return Color3.fromRGB(r, g, b)
    else
        warn("Invalid Hex Code")
        return nil
    end
end

local function clearHitboxEffects(player)
    if player.Character then
        local rootPart = player.Character:FindFirstChild("HumanoidRootPart")
        if rootPart then
            for _, child in pairs(rootPart:GetChildren()) do
                if child:IsA("BoxHandleAdornment") or child:IsA("SelectionBox") then
                    child:Destroy()
                end
            end
            rootPart.CanCollide = true
            rootPart.Size = originalHumanoidRootPartSize
        end
    end
end

local function applyHitboxEffects(player)
    if player.Character then
        local rootPart = player.Character:FindFirstChild("HumanoidRootPart")
        if rootPart then
            clearHitboxEffects(player)

            rootPart.CanCollide = false
            rootPart.Size = Vector3.new(hitboxSize, hitboxSize, hitboxSize)

            local outline = Instance.new("BoxHandleAdornment")
            outline.Name = "HitboxOutline"
            outline.Adornee = rootPart
            outline.Size = rootPart.Size
            outline.Color3 = hitboxColor
            outline.Transparency = isHitboxVisible and 0.9 or 1
            outline.AlwaysOnTop = true
            outline.Parent = rootPart

            local forcefieldEffect = Instance.new("SelectionBox")
            forcefieldEffect.Name = "ForcefieldEffect"
            forcefieldEffect.Adornee = rootPart
            forcefieldEffect.LineThickness = 0.02
            forcefieldEffect.Color3 = hitboxColor
            forcefieldEffect.Transparency = isHitboxVisible and 0.3 or 1
            forcefieldEffect.Parent = rootPart
        end
    end
end

local function toggleHitboxVisibility()
    isHitboxVisible = not isHitboxVisible
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local rootPart = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if rootPart then
                for _, child in pairs(rootPart:GetChildren()) do
                    if child:IsA("BoxHandleAdornment") or child:IsA("SelectionBox") then
                        child.Transparency = isHitboxVisible and 0.9 or 1
                    end
                end
            end
        end
    end
end

local function applyHitboxesToAllPlayers()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            applyHitboxEffects(player)
        end
    end
end

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function()
        applyHitboxEffects(player)
    end)
end)

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == Enum.KeyCode.H then
        toggleHitboxVisibility()
    end
end)

local function startHitboxLoop()
    hitboxLoop = task.spawn(function()
        while true do
            wait(refreshTime)
            for _, player in ipairs(Players:GetPlayers()) do
                if player ~= LocalPlayer then
                    clearHitboxEffects(player)
                    applyHitboxEffects(player)
                end
            end
        end
    end)
end

local function stopHitboxLoop()
    if hitboxLoop then
        task.cancel(hitboxLoop)
        hitboxLoop = nil
    end
end

MainSectionLeft:Toggle("Hitbox Expander ┃ Keybind: H", function(value)
    if value then
        startHitboxLoop()
        applyHitboxesToAllPlayers()
    else
        stopHitboxLoop()
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer then
                clearHitboxEffects(player)
            end
        end
    end
end)

SettingsSectionRight:Slider("Hitbox Size", 1, 35, function(value)
    hitboxSize = value
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            clearHitboxEffects(player)
            applyHitboxEffects(player)
        end
    end
end)

MainSectionRight:Toggle("FakeMacro Speed ┃ Keybind: Z", function(macrospeed)
    if macrospeed then
        wait(0.1)
        local Players = game:GetService("Players")
        local Client = Players.LocalPlayer
        local Mouse = Client:GetMouse()

        getgenv().keybind = "Z"
        getgenv().speeding = 600

        local isSpeeding = false

        Mouse.KeyDown:Connect(function(key)
            if key:lower() == getgenv().keybind:lower() then
                task.wait(0.1)
                isSpeeding = not isSpeeding

                local character = Client.Character
                if character then
                    local humanoid = character:FindFirstChildOfClass("Humanoid")
                    if humanoid then
                        humanoid.WalkSpeed = isSpeeding and getgenv().speeding or 20

                        humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
                            humanoid.WalkSpeed = isSpeeding and getgenv().speeding or 20
                        end)
                    end
                end
            end
        end)

        game:GetService("Players").LocalPlayer.CharacterAdded:Connect(function()
            isSpeeding = false
            local character = game.Players.LocalPlayer.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.WalkSpeed = 16
                end
            end
        end)
        
    else
        getgenv().speeding = 16
        local character = game.Players.LocalPlayer.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = 16
            end
        end
    end
end)

SettingsSectionLeft:Slider("FakeMacro Speed Value", 100, 1000, function(value)
    getgenv().speeding = value
    local character = game.Players.LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = value
        end
    end
end)

MainSectionRight:Toggle("CFrame Speed ┃ Keybind: Z", function(f)
    if f then
        local istoggled = false
        getgenv().cframespeedtoggle = false
        local KeyBind = "z"  
        getgenv().speedvalue = 1.90

        local UserInputService = game:GetService("UserInputService")

        UserInputService.InputBegan:Connect(function(input, gameProcessed)
          if gameProcessed then return end 

           if input.KeyCode == Enum.KeyCode[KeyBind:upper()] then
              istoggled = not istoggled
        getgenv().cframespeedtoggle = istoggled
    end
end)

game:GetService("RunService").Heartbeat:Connect(function()
    if getgenv().cframespeedtoggle then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame +
            game.Players.LocalPlayer.Character.Humanoid.MoveDirection * getgenv().speedvalue / 0.5
    end
end)
    else
        local istoggled = false
        getgenv().cframespeedtoggle = false
        getgenv().speedvalue = 0
    end
end)


local FlyKey = Enum.KeyCode.V
local SpeedKey = Enum.KeyCode.LeftShift

local SpeedKeyMultiplier = 3
local FlightSpeed = 256
local FlightAcceleration = 10
local TurnSpeed = 100

local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local User = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local UserCharacter = nil
local UserRootPart = nil
local Connection = nil
local FlightEnabled = false
local InputConnection = nil

workspace.Changed:Connect(function()
    Camera = workspace.CurrentCamera
end)

local setCharacter = function(c)
    UserCharacter = c
    UserRootPart = c:WaitForChild("HumanoidRootPart")
end

User.CharacterAdded:Connect(setCharacter)
if User.Character then
    setCharacter(User.Character)
end

local CurrentVelocity = Vector3.new(0,0,0)

local Flight = function(delta)
    local BaseVelocity = Vector3.new(0,0,0)
    if not UserInputService:GetFocusedTextBox() then
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then
            BaseVelocity = BaseVelocity + (Camera.CFrame.LookVector * FlightSpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then
            BaseVelocity = BaseVelocity - (Camera.CFrame.RightVector * FlightSpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then
            BaseVelocity = BaseVelocity - (Camera.CFrame.LookVector * FlightSpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then
            BaseVelocity = BaseVelocity + (Camera.CFrame.RightVector * FlightSpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
            BaseVelocity = BaseVelocity + (Camera.CFrame.UpVector * FlightSpeed)
        end
        if UserInputService:IsKeyDown(SpeedKey) then
            BaseVelocity = BaseVelocity * SpeedKeyMultiplier
        end
    end
    if UserRootPart then
        local car = UserRootPart:GetRootPart()
        if car.Anchored then return end
        if not isnetworkowner(car) then return end
        CurrentVelocity = CurrentVelocity:Lerp(
            BaseVelocity,
            math.clamp(delta * FlightAcceleration, 0, 1)
        )
        car.Velocity = CurrentVelocity + Vector3.new(0, 2, 0)
        if car ~= UserRootPart then
            car.RotVelocity = Vector3.new(0,0,0)
            car.CFrame = car.CFrame:Lerp(CFrame.lookAt(
                car.Position,
                car.Position + CurrentVelocity + Camera.CFrame.LookVector
            ), math.clamp(delta * TurnSpeed, 0, 1))
        end
    end
end

MainSectionRight:Toggle("Flight ┃ Keybind: V", function(FlightToggle)
    FlightEnabled = FlightToggle
    if FlightEnabled then
        if not InputConnection then
            InputConnection = UserInputService.InputBegan:Connect(function(userInput, gameProcessed)
                if gameProcessed then return end
                if userInput.KeyCode == FlyKey then
                    if Connection then
                        Connection:Disconnect()
                        Connection = nil
                    else
                        CurrentVelocity = UserRootPart.Velocity
                        Connection = RunService.Heartbeat:Connect(Flight)
                    end
                end
            end)
        end
    else
        if InputConnection then
            InputConnection:Disconnect()
            InputConnection = nil
        end
        if Connection then
            Connection:Disconnect()
            Connection = nil
        end
    end
end)

TeleportsSectionLeft:Button("Bank", function(f)
	local targetPosition = Vector3.new(-480, 23, -285)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("School", function(f)
	local targetPosition = Vector3.new(-532, 21, 336)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("HairSalon", function(f)
	local targetPosition = Vector3.new(-858, 22, -652)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("Gym", function(f)
	local targetPosition = Vector3.new(-79, 22, -632)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("HoodKicks", function(f)
	local targetPosition = Vector3.new(-240, 21, -413)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("UpHill", function(f)
	local targetPosition = Vector3.new(481, 47, -572)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("DownHill", function(f)
	local targetPosition = Vector3.new(-535, 7, -735)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("UpHillFood", function(f)
	local targetPosition = Vector3.new(588, 51, -480)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("Food", function(f)
	local targetPosition = Vector3.new(-335, 23, -295)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("Park", function(f)
	local targetPosition = Vector3.new(-262, 22, -761)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("GasStation", function(f)
	local targetPosition = Vector3.new(592, 48, -257)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("Military", function(f)
	local targetPosition = Vector3.new(38, 25, -875)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionRight:Button("Revolver", function(f)
	local targetPosition = Vector3.new(-635, 21, -131)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionRight:Button("LMG", function(f)
	local targetPosition = Vector3.new(-618, 23, -296)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionRight:Button("AUG, Rifle", function(f)
	local targetPosition = Vector3.new(-266, 52, -226)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)
		
TeleportsSectionLeft:Button("Police Station", function(f)
	local targetPosition = Vector3.new(-263, 21, -97)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionRight:Button("Tactical Shotgun", function(f)
	local targetPosition = Vector3.new(471, 48, -625)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionRight:Button("Double Barrel", function(f)
	local targetPosition = Vector3.new(-1043, 21, -263)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("Arcade", function(f)
	local targetPosition = Vector3.new(-221, 22, -290)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("Phone Shop", function(f)
	local targetPosition = Vector3.new(-135, 21, -985)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("High Medium Armor", function(f)
	local targetPosition = Vector3.new(-933, -28, 563)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

TeleportsSectionLeft:Button("Safe 1", function(f)
	local targetPosition = Vector3.new(196, -7, 341)

local function teleportPlayer()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:SetPrimaryPartCFrame(CFrame.new(targetPosition))
    end
end

teleportPlayer()

end)

local Player = game:GetService("Players").LocalPlayer
local Mouse = Player:GetMouse()
local Camera = game:GetService("Workspace").CurrentCamera
local Circle = nil
local connection = nil
local CircleEnabled = false

local function CreateCircle()
    local circle = Drawing.new("Circle")
    circle.Visible = false
    circle.Color = Color3.fromRGB(255, 255, 255)
    circle.Thickness = 1
    circle.Filled = false
    return circle
end

local function UpdateCirclePosition()
    if not CircleEnabled then return end

    if connection then return end

    connection = game:GetService("RunService").RenderStepped:Connect(function()
        if not CircleEnabled then
            if Circle then
                Circle.Visible = false
            end
            if connection then
                connection:Disconnect()
                connection = nil
            end
            return
        end

        if not Circle then
            Circle = CreateCircle()
        end

        local mousePosition = Mouse.Hit.p
        local screenPosition, visible = Camera:WorldToViewportPoint(mousePosition)

        if visible then
            Circle.Position = Vector2.new(screenPosition.X, screenPosition.Y)
            Circle.Radius = 250
            Circle.Visible = true
        else
            Circle.Visible = false
        end
    end)
end

VisualsSectionRight:Toggle("FOV Circle", function(f)
    if f then
        CircleEnabled = true
        if not Circle then
            Circle = CreateCircle()
        end
        Circle.Visible = true
        UpdateCirclePosition()
    else
        CircleEnabled = false
        if Circle then
            Circle.Visible = false
        end
        if connection then
            connection:Disconnect()
            connection = nil
        end
    end
end)

Circle = CreateCircle()

VisualsSectionRight:Toggle("FOV Filled", function(f)
    if f then
        Circle.Filled = true
    else
        Circle.Filled = false
    end
end)

MiscSectionRight:Button("Force Reset", function(ForceReset)
    game.Players.LocalPlayer.Character:WaitForChild("Humanoid").Health = 0
end)

MiscSectionRight:Button("Animation Pack", function(AnimationPack)
    loadstring(game:HttpGet(('https://raw.githubusercontent.com/Rafapapolas/DahoodScripts/refs/heads/main/Animation%20Pack.lua'),true))()
end)

MiscSectionLeft:Toggle("Infinite Zoom", function(f)
    if f then
        game.Players.LocalPlayer.CameraMaxZoomDistance = 100000
    else
        game.Players.LocalPlayer.CameraMaxZoomDistance = 35
    end    
end)

MiscSectionLeft:Toggle("Chat Logs", function(ChatLogsToggled)
    if ChatLogsToggled == true then
    	game.Players.LocalPlayer.PlayerGui.Chat.Frame.ChatBarParentFrame.Position = game.Players.LocalPlayer.PlayerGui.Chat.Frame.ChatChannelParentFrame.Position + UDim2.new(UDim.new(),game.Players.LocalPlayer.PlayerGui.Chat.Frame.ChatChannelParentFrame.Size.Y)
    	game.Players.LocalPlayer.PlayerGui.Chat.Frame.ChatChannelParentFrame.Visible = true
    	else
        game.Players.LocalPlayer.PlayerGui.Chat.Frame.ChatChannelParentFrame.Visible = false
    end
end)

local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RATE_PER_SECOND = 2

local autoStompEnabled = false

MiscSectionLeft:Toggle("AutoStomp", function(AStomp)
    autoStompEnabled = AStomp
end)

RunService.Stepped:Connect(function(time, step)
    if autoStompEnabled then
        ReplicatedStorage.MainEvent:FireServer("Stomp")
    end
end)

MiscSectionLeft:Toggle("Streched Resolution [BUGGY]", function(StrechedRes)
    if StrechedRes then
        getgenv().Resolution = {
            [".gg/scripters"] = 0.7
        }
        
        local Camera = workspace.CurrentCamera
        if getgenv().gg_scripters == nil then
            game:GetService("RunService").RenderStepped:Connect(
                function()
                    Camera.CFrame = Camera.CFrame * CFrame.new(0, 0, 0, 1, 0, 0, 0, getgenv().Resolution[".gg/scripters"], 0, 0, 0, 1)
                end
            )
        end
        getgenv().gg_scripters = "Aori0001"
    else
        getgenv().Resolution = {
            [".gg/scripters"] = 1
        }
        
        local Camera = workspace.CurrentCamera
        if getgenv().gg_scripters == nil then
            game:GetService("RunService").RenderStepped:Connect(
                function()
                    Camera.CFrame = Camera.CFrame * CFrame.new(0, 0, 0, 1, 0, 0, 0, getgenv().Resolution[".gg/scripters"], 0, 0, 0, 1)
                end
            )
        end
        getgenv().gg_scripters = "Aori0001"
    end
end)

local Settings = {
    Box_Color = Color3.fromRGB(255, 0, 0),
    Box_Thickness = 1
}
local Team_Check = {
    TeamCheck = false,
    Green = Color3.fromRGB(0, 255, 0),
    Red = Color3.fromRGB(255, 0, 0)
}
local TeamColor = true

local player = game:GetService("Players").LocalPlayer
local camera = game:GetService("Workspace").CurrentCamera
local mouse = player:GetMouse()

local function NewQuad(thickness, color)
    local quad = Drawing.new("Quad")
    quad.Visible = false
    quad.PointA = Vector2.new(0,0)
    quad.PointB = Vector2.new(0,0)
    quad.PointC = Vector2.new(0,0)
    quad.PointD = Vector2.new(0,0)
    quad.Color = color
    quad.Filled = false
    quad.Thickness = thickness
    quad.Transparency = 1
    return quad
end

local function Visibility(state, lib)
    for u, x in pairs(lib) do
        x.Visible = state
    end
end

local black = Color3.fromRGB(0, 0 ,0)

local library = {}
local connections = {}

local function ESP(plr)
    library[plr] = {
        black = NewQuad(Settings.Box_Thickness*2, black),
        box = NewQuad(Settings.Box_Thickness, Settings.Box_Color)
    }

    local connection
    connection = game:GetService("RunService").RenderStepped:Connect(function()
        if plr.Character ~= nil and plr.Character:FindFirstChild("Humanoid") ~= nil and plr.Character:FindFirstChild("HumanoidRootPart") ~= nil and plr.Character.Humanoid.Health > 0 and plr.Character:FindFirstChild("Head") ~= nil then
            local HumPos, OnScreen = camera:WorldToViewportPoint(plr.Character.HumanoidRootPart.Position)
            if OnScreen then
                local head = camera:WorldToViewportPoint(plr.Character.Head.Position)
                local DistanceY = math.clamp((Vector2.new(head.X, head.Y) - Vector2.new(HumPos.X, HumPos.Y)).magnitude, 2, math.huge)
                
                local function Size(item)
                    item.PointA = Vector2.new(HumPos.X + DistanceY, HumPos.Y - DistanceY*2)
                    item.PointB = Vector2.new(HumPos.X - DistanceY, HumPos.Y - DistanceY*2)
                    item.PointC = Vector2.new(HumPos.X - DistanceY, HumPos.Y + DistanceY*2)
                    item.PointD = Vector2.new(HumPos.X + DistanceY, HumPos.Y + DistanceY*2)
                end
                Size(library[plr].box)
                Size(library[plr].black)

                if Team_Check.TeamCheck then
                    if plr.TeamColor == player.TeamColor then
                        library[plr].box.Color = Team_Check.Green
                    else 
                        library[plr].box.Color = Team_Check.Red
                    end
                else 
                    library[plr].box.Color = Settings.Box_Color
                end
                if TeamColor == true then
                    library[plr].box.Color = plr.TeamColor.Color
                end
                Visibility(true, {library[plr].box, library[plr].black})
            else 
                Visibility(false, {library[plr].box, library[plr].black})
            end
        else 
            Visibility(false, {library[plr].box, library[plr].black})
            if game.Players:FindFirstChild(plr.Name) == nil then
                connection:Disconnect()
                connections[plr] = nil
            end
        end
    end)
    
    connections[plr] = connection
end

local function RemoveESP(plr)
    Visibility(false, {library[plr].box, library[plr].black})
    connections[plr]:Disconnect()
    connections[plr] = nil
    library[plr] = nil
end

local playerAddedConnection

VisualsSectionLeft:Toggle("Box ESP", function(BoxESP)
    if BoxESP then
        playerAddedConnection = game.Players.PlayerAdded:Connect(function(newplr)
            if newplr.Name ~= player.Name and not library[newplr] then
                coroutine.wrap(ESP)(newplr)
            end
        end)

        for i, v in pairs(game:GetService("Players"):GetPlayers()) do
            if v.Name ~= player.Name and not library[v] then
                coroutine.wrap(ESP)(v)
            end
        end

        for i, v in pairs(library) do
            Visibility(true, {v.box, v.black})
        end
    else
        for i, v in pairs(library) do
            Visibility(false, {v.box, v.black})
        end
        for plr, connection in pairs(connections) do
            connection:Disconnect()
        end
        connections = {}
        library = {}

        if playerAddedConnection then
            playerAddedConnection:Disconnect()
            playerAddedConnection = nil
        end
    end
end)
  
local Settings = {
    Tracer_Color = Color3.fromRGB(255, 0, 0),
    Tracer_Thickness = 1,
    Tracer_Origin = "Middle",
    Tracer_FollowMouse = false,
    Tracers = false
}
local Team_Check = {
    TeamCheck = false,
    Green = Color3.fromRGB(0, 255, 0),
    Red = Color3.fromRGB(255, 0, 0)
}
local TeamColor = true

local player = game:GetService("Players").LocalPlayer
local camera = game:GetService("Workspace").CurrentCamera
local mouse = player:GetMouse()

local function NewLine(thickness, color)
    local line = Drawing.new("Line")
    line.Visible = false
    line.From = Vector2.new(0, 0)
    line.To = Vector2.new(0, 0)
    line.Color = color
    line.Thickness = thickness
    line.Transparency = 1
    return line
end

local function Visibility(state, lib)
    for u, x in pairs(lib) do
        x.Visible = state
    end
end

local function TracerESP(plr)
    local library = {
        blacktracer = NewLine(Settings.Tracer_Thickness * 2, Color3.fromRGB(0, 0, 0)),
        tracer = NewLine(Settings.Tracer_Thickness, Settings.Tracer_Color)
    }

    local function Updater()
        local connection
        connection = game:GetService("RunService").RenderStepped:Connect(function()
            if Settings.Tracers then
                if plr.Character ~= nil and plr.Character:FindFirstChild("Humanoid") ~= nil and plr.Character:FindFirstChild("HumanoidRootPart") ~= nil and plr.Character.Humanoid.Health > 0 and plr.Character:FindFirstChild("Head") ~= nil then
                    local HumPos, OnScreen = camera:WorldToViewportPoint(plr.Character.HumanoidRootPart.Position)
                    if OnScreen then
                        local head = camera:WorldToViewportPoint(plr.Character.Head.Position)
                        local DistanceY = math.clamp((Vector2.new(head.X, head.Y) - Vector2.new(HumPos.X, HumPos.Y)).magnitude, 2, math.huge)

                        if Settings.Tracer_Origin == "Middle" then
                            library.tracer.From = camera.ViewportSize * 0.5
                            library.blacktracer.From = camera.ViewportSize * 0.5
                        elseif Settings.Tracer_Origin == "Bottom" then
                            library.tracer.From = Vector2.new(camera.ViewportSize.X * 0.5, camera.ViewportSize.Y)
                            library.blacktracer.From = Vector2.new(camera.ViewportSize.X * 0.5, camera.ViewportSize.Y)
                        end

                        if Settings.Tracer_FollowMouse then
                            library.tracer.From = Vector2.new(mouse.X, mouse.Y + 36)
                            library.blacktracer.From = Vector2.new(mouse.X, mouse.Y + 36)
                        end

                        library.tracer.To = Vector2.new(HumPos.X, HumPos.Y + DistanceY * 2)
                        library.blacktracer.To = Vector2.new(HumPos.X, HumPos.Y + DistanceY * 2)

                        if Team_Check.TeamCheck then
                            if plr.TeamColor == player.TeamColor then
                                library.tracer.Color = Team_Check.Green
                            else
                                library.tracer.Color = Team_Check.Red
                            end
                        else
                            library.tracer.Color = Settings.Tracer_Color
                        end

                        if TeamColor == true then
                            library.tracer.Color = plr.TeamColor.Color
                        end

                        Visibility(true, {library.tracer, library.blacktracer})
                    else
                        Visibility(false, {library.tracer, library.blacktracer})
                    end
                else
                    Visibility(false, {library.tracer, library.blacktracer})
                    if game.Players:FindFirstChild(plr.Name) == nil then
                        connection:Disconnect()
                    end
                end
            else
                Visibility(false, {library.tracer, library.blacktracer})
            end
        end)
    end
    coroutine.wrap(Updater)()
end

for i, v in pairs(game:GetService("Players"):GetPlayers()) do
    if v.Name ~= player.Name then
        coroutine.wrap(TracerESP)(v)
    end
end

game.Players.PlayerAdded:Connect(function(newplr)
    if newplr.Name ~= player.Name then
        coroutine.wrap(TracerESP)(newplr)
    end
end)

VisualsSectionLeft:Toggle("Tracer ESP", function(state)
    Settings.Tracers = state
end)

local run = game:GetService('RunService')
local originalProperties = {}
local GunChamsEnabled = false

local function getGun()
    local character = game:GetService('Players').LocalPlayer.Character
    if character then
        for _, v in pairs(character:GetChildren()) do
            if v and v:FindFirstChild('Default') then
                return v
            end
        end
    end
    return nil
end

local function color(v)
    if not originalProperties[v] then
        originalProperties[v] = {Color = v.Color, Material = v.Material}
    end
    v.Color = Color3.fromRGB(164, 140, 165)
    v.Material = Enum.Material.ForceField
end

local function restore(v)
    if originalProperties[v] then
        v.Color = originalProperties[v].Color
        v.Material = originalProperties[v].Material
        originalProperties[v] = nil
    end
end

if VisualsSectionLeft then
    VisualsSectionLeft:Toggle("GunChams", function(GunChams)
        GunChamsEnabled = GunChams
    end)
end

local connection
connection = run.Stepped:Connect(function()
    local gun = getGun()
    if gun then
        for _, part in pairs(gun:GetChildren()) do
            if part:IsA("BasePart") then
                if GunChamsEnabled then
                    color(part)
                else
                    restore(part)
                end
            end
        end
    end
end)

game:GetService('Players').LocalPlayer.CharacterAdded:Connect(function()
    connection = run.Stepped:Connect(function()
        local gun = getGun()
        if gun then
            for _, part in pairs(gun:GetChildren()) do
                if part:IsA("BasePart") then
                    if GunChamsEnabled then
                        color(part)
                    else
                        restore(part)
                    end
                end
            end
        end
    end)
end)

game:GetService('Players').LocalPlayer.Character.Humanoid.Died:Connect(function()
    connection:Disconnect()
    originalProperties = {}
end)


MiscSectionLeft:Toggle("AutoReload", function(AReload)
    _G.AutoReload = AReload
end)

_G.AutoReload = false

while true do
    if _G.AutoReload then
        if game:GetService("Players").LocalPlayer.Character:FindFirstChildWhichIsA("Tool") then
            local tool = game:GetService("Players").LocalPlayer.Character:FindFirstChildWhichIsA("Tool")
            if tool:FindFirstChild("Ammo") then
                if tool.Ammo.Value <= 0 then
                    game:GetService("ReplicatedStorage").MainEvent:FireServer("Reload", tool)
                    wait(1)
                end
            end
        end
    end
    wait(0.1)
end

return magic
